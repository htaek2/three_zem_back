{{! frame/frame.mustache : ìƒë‹¨ë°” + í•˜ë‹¨ ë„¤ë¹„ (ì™„ì „ í¬í•¨íŒ) }}

<style>
    :root{
      /* ê³µí†µ ìƒ‰ìƒ */
      --topbar-bg:#09131A;
      --topbar-text:#FAFAFA;

      --footer-bg:rgba(9,19,26,.9);
      --footer-line:#0E1C26;
      --tile-bg:#09131A;     /* ê° ë²„íŠ¼ ì¹¸ ë°°ê²½ */
      --tile-border:#1D282F; /* ê° ë²„íŠ¼ ì¹¸ í…Œë‘ë¦¬ */
      --green:#00AA6F;       /* 86x50 ì´ˆë¡ ë°•ìŠ¤ */
      --label:#FAFAFA;       /* ë¼ë²¨ í…ìŠ¤íŠ¸ */
    }

    /* ê³ ì •ë°” ë†’ì´ë§Œí¼ ì—¬ë°±ë§Œ ë¶€ì—¬ (ë°°ê²½/í…ìŠ¤íŠ¸ ì»¬ëŸ¬ëŠ” ê±´ë“œë¦¬ì§€ ì•ŠìŒ) */
    body{ padding-top:50px; padding-bottom:60px; margin:0; }

    /* ========= ìƒë‹¨ë°” ========= */
    .main-header{
      position:fixed; top:0; left:0; right:0; height:50px;
      background:var(--topbar-bg);
      display:flex; align-items:center; gap:12px;
      padding:0 20px; z-index:1000;
      color:var(--topbar-text);
    }
    .main-header .logo,
    .main-header .logo-ph{
      width: clamp(18px, 1.2vw, 28px);
      height: clamp(18px, 1.2vw, 28px);
    }
    .main-header .logo{ object-fit:contain; display:block; }
    .main-header .logo-ph{
      display:grid; place-items:center;
      border-radius:6px; background:#0F2230; color:#8FBBD0;
      font-size: clamp(8px, .8vw, 11px); font-weight:700; letter-spacing:.5px;
    }
    .main-header .title{
      margin:0; font-weight:700; letter-spacing:.2px;
      font-size: clamp(14px, 1.2vw, 18px); color:var(--topbar-text);
    }

    /* ========= í•˜ë‹¨ ë„¤ë¹„ ========= */
    .main-footer{
      position:fixed; left:0; right:0; bottom:0; height:60px;
      background:var(--footer-bg);
      border-top:1px solid var(--footer-line);
      backdrop-filter: blur(6px);
      z-index:1000;
    }
    /* 1920pxì—ì„œ ì •í™•íˆ 384Ã—60ì´ ë˜ë„ë¡ 5ë“±ë¶„, ì¤‘ì•™ì •ë ¬ */
    .bottom-nav{
      height:100%; display:grid; grid-template-columns:repeat(5, 1fr);
      width:100%; max-width:1920px; margin:0 auto;
    }

    /* ê° ë²„íŠ¼ íƒ€ì¼: 384Ã—60, ë°°ê²½(#09131A) + 1px í…Œë‘ë¦¬(#1D282F) */
    .nav-button{
      position:relative; height:60px;
      display:flex; align-items:center; justify-content:center;
      text-decoration:none; user-select:none;
      background:var(--tile-bg);
      border-top:1px solid var(--tile-border);
      border-bottom:1px solid var(--tile-border);
      /* ì¢Œ/ìš° í…Œë‘ë¦¬ëŠ” ê²¹ì¹˜ì§€ ì•Šê²Œ ì™¼ìª½ë§Œ ê³µí†µ, ë§ˆì§€ë§‰ë§Œ ì˜¤ë¥¸ìª½ ì¶”ê°€ */
      border-left:1px solid var(--tile-border);
      color:var(--label);
    }
    .nav-button:last-child{ border-right:1px solid var(--tile-border); }

    /* 86Ã—50 ì»¨í…Œì´ë„ˆ: ì•„ì´ì½˜ + ë¼ë²¨ì„ ì¢€ ë” ê°€ê¹ê²Œ */
    .icon-wrapper{
      position:relative; width:86px; height:50px; border-radius:10px;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      gap:2px; overflow:hidden;
    }
/**/
    /* ì´ˆë¡ ë°•ìŠ¤: ê¸°ë³¸ ìˆ¨ê¹€, í˜¸ë²„/active ì‹œì—ë§Œ ë“±ì¥. ì•„ì´ì½˜+ë¼ë²¨ ëª¨ë‘ ê°ìŒˆ */
    .icon-wrapper::before{
      content:""; position:absolute; inset:0; border-radius:10px;
      background:var(--green); opacity:0; transition:opacity .12s ease;
      z-index:0;
    }
    .nav-button:hover .icon-wrapper::before,
    .nav-button.active .icon-wrapper::before{ opacity:1; }

    /* ì•„ì´ì½˜ PNG: ê¸°ë³¸ì€ ì›ë³¸ìƒ‰. í°ìƒ‰ ê°•ì œí•˜ë ¤ë©´ icon--white ì¶”ê°€ */
    .icon-img{
      width: clamp(18px,1.6vw,28px); height: clamp(18px,1.6vw,28px);
      object-fit:contain; z-index:1;
    }
    .icon--white{ filter:brightness(0) invert(1); }

    /* ë¼ë²¨: ìˆœìˆ˜ í°ìƒ‰, ìŠ¤íŠ¸ë¡œí¬ ì—†ìŒ */
    .nav-label{
      z-index:1; line-height:1; color:var(--label);
      font-size: clamp(10px,.9vw,13px);
    }

    @media (max-width:1280px){
      .icon-wrapper{ width:68px; height:44px; }
    }
</style>

{{! ---------- ìƒë‹¨ë°” ---------- }}
<header class="main-header" role="banner" aria-label="ìƒë‹¨ ë°”">
    {{#logoPath}}
        <img src="{{logoPath}}" alt="ë¡œê³ " class="logo"
             onerror="this.style.display='none'; this.nextElementSibling.style.display='grid';">
        <div class="logo-ph" style="display:none">LOGO</div>
    {{/logoPath}}
    {{^logoPath}}
        <div class="logo-ph">LOGO</div>
    {{/logoPath}}
    <h1 class="title">BEMS ì œì–´</h1>
</header>

{{! ---------- í•˜ë‹¨ ë„¤ë¹„ ---------- }}
<footer class="main-footer" role="navigation" aria-label="í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜">
    <nav class="bottom-nav">
        {{#navItems}}
            <a href="{{href}}" class="nav-button {{#isActive}}active{{/isActive}}" data-key="{{key}}" aria-label="{{text}}">
                <div class="icon-wrapper">
                    {{#iconPath}}
                        <img src="{{iconPath}}" alt="{{text}}" class="icon-img {{#white}}icon--white{{/white}}">
                    {{/iconPath}}
                    {{^iconPath}}
                        <!-- ì„ì‹œ ì•„ì´ì½˜(ì´ëª¨ì§€/ë¬¸ì) -->
                        <span class="icon-img icon--white" style="display:grid;place-items:center;font-weight:800;">
                            {{placeholder}}
                        </span>
                    {{/iconPath}}
                    <span class="nav-label">{{text}}</span>
                </div>
            </a>
        {{/navItems}}

        {{^navItems}}
            <!-- ê¸°ë³¸ 5ê°œ: ê°œìš”, ëª¨ë‹ˆí„°ë§, ì—ë„ˆì§€ í˜„í™©, í†µí•© ë¶„ì„, íƒ„ì†Œë°°ì¶œ -->
            <a href="/overview"   class="nav-button" data-key="overview"   aria-label="ê°œìš”">
                <div class="icon-wrapper">
                    <span class="icon-img icon--white" style="display:grid;place-items:center;font-weight:800;">âŒ‚</span>
                    <span class="nav-label">ê°œìš”</span>
                </div>
            </a>
            <a href="/monitoring" class="nav-button" data-key="monitoring" aria-label="ëª¨ë‹ˆí„°ë§">
                <div class="icon-wrapper">
                    <span class="icon-img icon--white" style="display:grid;place-items:center;font-weight:800;">â±</span>
                    <span class="nav-label">ëª¨ë‹ˆí„°ë§</span>
                </div>
            </a>
            <a href="/energy"     class="nav-button" data-key="energy"     aria-label="ì—ë„ˆì§€ í˜„í™©">
                <div class="icon-wrapper">
                    <span class="icon-img icon--white" style="display:grid;place-items:center;font-weight:800;">âš¡</span>
                    <span class="nav-label">ì—ë„ˆì§€ í˜„í™©</span>
                </div>
            </a>
            <a href="/analysis"   class="nav-button" data-key="analysis"   aria-label="í†µí•© ë¶„ì„">
                <div class="icon-wrapper">
                    <span class="icon-img icon--white" style="display:grid;place-items:center;font-weight:800;">ğŸ“Š</span>
                    <span class="nav-label">í†µí•© ë¶„ì„</span>
                </div>
            </a>
            <a href="/carbon"     class="nav-button" data-key="carbon"     aria-label="íƒ„ì†Œë°°ì¶œ">
                <div class="icon-wrapper">
                    <span class="icon-img icon--white" style="display:grid;place-items:center;font-weight:800;">ğŸŒ¿</span>
                    <span class="nav-label">íƒ„ì†Œë°°ì¶œ</span>
                </div>
            </a>
        {{/navItems}}
    </nav>
</footer>

<script>
    (function(){
      /* ì„œë²„ê°€ isActiveë¥¼ ì•ˆ ì¤„ ë•Œ, main[data-page] ê¸°ì¤€ìœ¼ë¡œ í™œì„± ì²˜ë¦¬ */
      if(!document.querySelector('.nav-button.active')){
        var key = document.querySelector('main[data-page]')?.getAttribute('data-page');
        if(key){
          var el = document.querySelector('.nav-button[data-key="'+key+'"]');
          if(el) el.classList.add('active');
        }
      }
    })();
</script>
