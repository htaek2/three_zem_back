<style>
    /* ===== Bottom Nav in frame_header ===== */
    :root{
      --nav-text:#FAFAFA;
      --nav-muted:#9AA7B0;
      --nav-line:#0E1C26;
      --nav-accent:#00AA6F;
      --nav-bg:rgba(9,19,26,.9);
    }
    /* í•˜ë‹¨ë°” ë†’ì´ë§Œí¼ ë³¸ë¬¸ ìœ„ë¡œ ì˜¬ë¦¬ê¸° */
    body{ padding-bottom:60px; }

    .main-footer{
      position:fixed; left:0; right:0; bottom:0;
      height:60px;
      background:var(--nav-bg);
      backdrop-filter: blur(6px);
      border-top:1px solid var(--nav-line);
      z-index:1000;
    }
    .bottom-nav{
      height:100%;
      display:flex;
    }
    .nav-button{
      flex:1 1 20%;
      display:flex; flex-direction:column;
      align-items:center; justify-content:center;
      gap:4px;
      text-decoration:none;
      color:var(--nav-muted);
      position:relative;
      transition: transform .12s ease, color .12s ease;
      user-select:none;
      padding:0 4px;
    }
    .nav-button:hover{ transform:translateY(-2px); color:var(--nav-text); }

    .icon-wrapper{
      width:86px; height:50px;             /* ìš”êµ¬ì‚¬í•­: 86 x 50 */
      border-radius:10px;
      background:var(--nav-accent);
      display:grid; place-items:center;
      overflow:hidden;
    }
    .icon-wrapper img{
      width: clamp(18px, 1.6vw, 28px);
      height: clamp(18px, 1.6vw, 28px);
      object-fit:contain;
      filter: drop-shadow(0 0 2px rgba(0,0,0,.25));
      display:block;
    }
    /* ì•„ì´ì½˜ í”Œë ˆì´ìŠ¤í™€ë”(í…ìŠ¤íŠ¸/ì´ëª¨ì§€) */
    .icon-placeholder{
      display:grid; place-items:center;
      width:100%; height:100%;
      font-weight:800;
      font-size: clamp(16px, 1.4vw, 22px);
      color:#003a27; /* ë…¹ìƒ‰ ë°°ê²½ ìœ„ ëŒ€ë¹„ */
      letter-spacing:.2px;
    }

    .nav-button span{
      font-size: clamp(10px, .9vw, 13px);
      line-height:1;
    }
    .nav-button.active{ color:var(--nav-text); }
    .nav-button.active::after{
      content:"";
      position:absolute; top:-2px;
      width:24%; height:3px; border-radius:2px;
      background:var(--nav-accent);
    }

    @media (max-width: 1280px){
      .icon-wrapper{ width:68px; height:44px; }
    }
</style>

<footer class="main-footer" role="navigation" aria-label="í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜">
    <nav class="bottom-nav">
        {{#navItems}}
            <a href="{{href}}" class="nav-button {{#isActive}}active{{/isActive}}" data-key="{{key}}" aria-label="{{text}}">
                <div class="icon-wrapper">
                    {{#iconPath}}
                        <img src="{{iconPath}}" alt="{{text}}"
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='grid';">
                        <span class="icon-placeholder" style="display:none">{{placeholder}}</span>
                    {{/iconPath}}
                    {{^iconPath}}
                        <span class="icon-placeholder">{{placeholder}}</span>
                    {{/iconPath}}
                </div>
                <span>{{text}}</span>
            </a>
        {{/navItems}}
    </nav>
</footer>

<script>
    (function(){
      /* 1) í™œì„± íƒ­ ìë™ ì§€ì • (ì„œë²„ì—ì„œ isActive ëª» ì¤„ ë•Œ) */
      if(!document.querySelector('.nav-button.active')){
        var key = document.querySelector('main[data-page]')?.getAttribute('data-page');
        if(key){
          var el = document.querySelector('.nav-button[data-key="'+key+'"]');
          if(el) el.classList.add('active');
        }
      }

      /* 2) ì•„ì´ì½˜ í”Œë ˆì´ìŠ¤í™€ë” í…ìŠ¤íŠ¸ ë³´ì •
         - navItems.placeholderê°€ ë¹„ì–´ ìˆìœ¼ë©´ key â†’ ì´ëª¨ì§€ ë§¤í•‘
           (ì—†ìœ¼ë©´ ì²« ê¸€ì ì‚¬ìš©)
      */
      var map = { overview:'âŒ‚', monitoring:'â±', energy:'âš¡', analysis:'ğŸ“Š', carbon:'ğŸŒ¿' };
      document.querySelectorAll('.nav-button').forEach(function(a){
        var ph = a.querySelector('.icon-placeholder');
        if(!ph) return;
        if(ph.textContent.trim()) return; // ì„œë²„ê°€ ì´ë¯¸ ì±„ì›Œì¤€ ê²½ìš°
        var key = a.getAttribute('data-key');
        var label = a.querySelector('span')?.textContent?.trim();
        ph.textContent = (key && map[key]) ? map[key] : (label ? label[0] : 'â€¢');
      });
    })();
</script>
